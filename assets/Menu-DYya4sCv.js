import{r,j as e,c as g,L as x,H as p,a as j,P as f,A as v}from"./index-DMIbpwBG.js";const w="_input_u60gl_2",N="_icon_u60gl_28",c={"input-wrapper":"_input-wrapper_u60gl_2",input:w,icon:N},b="/FoodClub/assets/search-BmLR6FH6.png",y=r.forwardRef(function({isValid:t=!0,className:d,...a},o){return e.jsxs("div",{className:c["input-wrapper"],children:[e.jsx("input",{...a,ref:o,className:g(c.input,d,c.input,{[c.invalid]:!t})}),e.jsx("img",{className:c.icon,src:b,alt:"иконка лупы"})]})}),z=y,F="_head_8ulg2_1",E={head:F},L="_card_m4d7z_1",P="_head_m4d7z_11",$="_price_m4d7z_19",C="_rating_m4d7z_60",S="_footer_m4d7z_84",R="_title_m4d7z_88",H="_description_m4d7z_96",n={card:L,head:P,price:$,"add-to-card":"_add-to-card_m4d7z_39",rating:C,footer:S,title:R,description:H},I="/FoodClub/assets/cart-card-btn-TcxIqPeH.png",M="/FoodClub/assets/rating-CFyDsVn9.png";function T(s){return e.jsx(x,{to:`/FoodClub/product/${s.id}`,children:e.jsxs("div",{className:n.card,children:[e.jsxs("div",{className:n.head,style:{backgroundImage:`url('${s.image}')`},children:[e.jsxs("div",{className:n.price,children:[s.price,e.jsx("span",{children:" ₽"})]}),e.jsx("button",{className:n["add-to-card"],children:e.jsx("img",{src:I,alt:"добавить в корзину"})}),e.jsxs("div",{className:n.rating,children:[s.rating,e.jsx("img",{src:M,alt:"иконка звезды"})]})]}),e.jsxs("div",{className:n.footer,children:[e.jsx("div",{className:n.title,children:s.title}),e.jsx("div",{className:n.description,children:s.ingredients})]})]})})}const W="_wrapper_1bzj4_1",k={wrapper:W};function A({products:s}){return e.jsx("div",{className:k.wrapper,children:s.map(t=>e.jsx(T,{id:t.id,title:t.title,ingredients:t.ingredients.join(", "),rating:t.rating,price:t.price,image:t.image},t.id))})}function q(){const[s,t]=r.useState([]),[d,a]=r.useState(!1),[o,l]=r.useState(),[u,m]=r.useState(+document.body.offsetWidth),_=async()=>{try{a(!0),await new Promise(h=>{setTimeout(()=>{h()},1e3)});const{data:i}=await j.get(f+"/products");t(i),a(!1)}catch(i){console.error(i),i instanceof v&&(l("Данные загружены локально "+i.message),a(!1)),setTimeout(()=>l(void 0),3e3);return}};return r.useEffect(()=>{_(),window.addEventListener("resize",function(){m(document.body.offsetWidth)})},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:E.head,children:[e.jsx(p,{children:"Меню"}),e.jsx(z,{placeholder:u>420?"Введите блюдо или состав":"Поиск"})]}),e.jsxs("div",{children:[o&&e.jsx(e.Fragment,{children:o}),!d&&e.jsx(A,{products:s}),d&&e.jsx(e.Fragment,{children:"Загружаем продукты..."})]})]})}export{q as default};
